<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이벤트 프로토타입</title>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/plugins/animation.gsap.js"></script>

    <link rel="stylesheet" href="style.css?t=<? echo time() ?>">
</head>

<body>

    <div class="top-1">
        <div class="book" id="animate1">
            <div class="msg">
                <img class="book_bg texts" id="animate2" src="./asset/book_msg.svg" alt="그동안 만나지 못했던, 편리한 독서의 시작. 밀리.">
                <div class="symbol"></div>
            </div>
            <img class="book_bg" src="./asset/book.png" alt="">
        </div>
        <div id="trigger1"></div>
    </div>


    <div class="top-2">
        <div id="trigger2" class="line">
            <svg viewBox="0 0 266 494" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g filter="url(#filter0_d)">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M42.7455 35.4073C30.11 26.4076 19.2203 15.11 10.6821 2.11516L11.5179 1.56604C19.9867 14.4553 30.7877 25.6615 43.32 34.5888C90.0022 65.9074 134.855 96.7877 171.119 127.723C207.376 158.653 235.102 189.684 247.466 221.318C264.782 265.627 263.375 308.521 244.057 340.997C224.734 373.482 187.552 395.442 133.534 397.999C133.531 397.999 133.527 397.999 133.524 397.999L132.758 398.069C108.727 400.238 72.1901 403.535 44.7529 411.899C30.8714 416.13 19.4127 421.632 13.0586 428.866C9.89235 432.47 8.00315 436.493 7.69803 441.004C7.39259 445.52 8.6711 450.577 11.9335 456.251C15.0822 461.727 20.6453 469.449 25.4369 474.862C27.8422 477.578 30.0129 479.666 31.5654 480.614C31.9495 480.849 32.2766 481.002 32.545 481.08C32.8164 481.16 32.989 481.152 33.0921 481.119C33.2286 481.075 33.4802 480.887 33.5001 479.989L34.4999 480.011C34.4782 480.988 34.1933 481.816 33.3982 482.071C33.0355 482.188 32.6434 482.151 32.2639 482.04C31.8814 481.928 31.4712 481.729 31.0441 481.468C29.3518 480.434 27.0954 478.243 24.6882 475.524C19.8548 470.065 14.2513 462.288 11.0666 456.749C7.73362 450.953 6.37817 445.7 6.70031 440.937C7.02276 436.169 9.02268 431.945 12.3073 428.206C18.855 420.752 30.5451 415.184 44.4613 410.942C71.9984 402.548 108.618 399.243 132.623 397.077L133.455 397.002L133.466 397.001L133.476 397.001C187.243 394.458 224.082 372.623 243.198 340.486C262.32 308.338 263.768 265.78 246.534 221.682C234.264 190.285 206.694 159.386 170.47 128.484C134.254 97.5895 89.4443 66.7372 42.757 35.4153L42.7453 35.4075L42.7455 35.4073Z"
                        fill="#FFEB60" />
                </g>
                <defs>
                    <filter id="filter0_d" x="0.654175" y="0.56604" width="264.904" height="492.577"
                        filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                        <feFlood flood-opacity="0" result="BackgroundImageFix" />
                        <feColorMatrix in="SourceAlpha" type="matrix"
                            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                        <feOffset dy="5" />
                        <feGaussianBlur stdDeviation="3" />
                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0" />
                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                    </filter>
                </defs>
            </svg>
        </div>
    </div>

    <script>
        var controller = new ScrollMagic.Controller();

        var scene = new ScrollMagic.Scene({
            // triggerHook: ".9",
            triggerElement: "#trigger1", duration: 500
        })
            .setTween("#animate1", 1, {
                scale: 10,
                x: "-268%",
                y: "100%",
            })
            .setPin(".book", { pushFollowers: false })
            .setClassToggle("#animate1", "zoom") // add class toggle
            .addTo(controller);

        var scene1 = new ScrollMagic.Scene({
            triggerElement: "#trigger1", duration: 400, offset: 300
        })
            .setTween(".book_bg", 1, {
                opacity: 0
            })
            // .addIndicators({ name: "1 (duration: 0)" })
            .addTo(controller);

        var scene2 = new ScrollMagic.Scene({
            triggerElement: "#trigger1", duration: 1000, offset: 300
        })
            .setTween(".symbol", {
                scale: 5,
            })
            .setClassToggle(".symbol", "line")
            .addTo(controller);

        // var start = scene2.scrollOffset();
        // var end = scene2.scrollOffset() + scene2.duration();
        var state = scene2.state();
        var progress = scene2.progress();
        scene2.on("progress", function (event) {
            console.log(progress);
        });
        $(window).scroll(function () {
            console.log("dd");
        });

            // .addIndicators({ name: "d" })

        // var scene3 = new ScrollMagic.Scene({
        //     triggerElement: "#trigger2", 
        //     duration: 800, 
        //     offset: -1000,
        //     triggerHook: "onEnter"
        // })
        //     .setPin(".symbol")
        //     .addIndicators({ name: "Nari" }) // add indicators (requires plugin)
        //     .addTo(controller);

    </script>


</body>

</html>